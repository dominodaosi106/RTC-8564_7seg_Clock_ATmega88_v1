# ATmega88P 7セグメントLEDクロック

## 概要
- ATmega88Pマイコンを使用した6桁7セグメントLEDクロック
- RTC-8564を搭載し、時刻（24時間/12時間表示）および年月日の表示・設定が可能です。
- 2つのスイッチで直感的な操作を実現しています。

## 開発環境
- **マイコン**: ATmega88P
- **クロック**: 1MHz（内部発振器）
- **開発ツール**: Atmel Studio 7
- **言語**: C
- **RTC**: RTC-8564（I2C接続）
- **ライブラリ**: `i2c.h` `i2c.c`（カスタムI2Cライブラリ）

### 回路図(準備中)

## 機能
- **時刻表示**:
  - 24時間/12時間（AM/PM）表示切替（S1短押し）
  - コロン点滅（毎秒0.5秒点灯）
- **年月日表示**:
  - 「YY.MM.DD」形式（S2短押しで2秒表示）
- **時刻設定**:
  - 時、分、秒を個別設定（S1+S2を2秒長押しで開始）
- **年月日設定**:
  - 年、月、日を個別設定（年月日表示中にS2を2秒長押しで開始）
- **ブザー**:
  - 電源投入時: 20ms音（初回/異常時1回、正常時2回）
  - 毎正時（0時/12時）: 100ms音（10ms音+80ms無音+10ms音）
- **LEDインジケータ**:
  - LED7（Gセグメント）: RTC電圧低下時常時点灯、12時間表示切替時に2秒点灯
  - LED8（小数点）: 毎秒16ms点灯
- **自動復帰**: 年月日表示（2秒）や設定モードから通常モードに復帰

## ハードウェア構成
- **ピンアサイン**:
  - PORTB: 7セグメントセグメント出力
  - PORTC: PC0,PC1（COM2,COM3）、PC2,PC3（S1,S2入力）
  - PORTD: PD0,PD1,PD4,PD5,PD7（COM0,1,4,5,6）、PD6（ブザー）、PD2（INT0）
- **スイッチ**: S1（PC2）、S2（PC3）
- **ブザー**: 約4kHz（PD6、Timer0制御）
- **7セグメント**: 6桁（Timer2で約1kHz多重化）
- **RTC**: RTC-8564（I2C、1Hz割り込みをPD2で受信）

## 操作方法
詳細な操作手順は[取扱説明書](docs/manual.md)を参照してください。主な操作は以下の通り：
- **通常モード**:
  - S1短押し: 24時間/12時間切替
  - S2短押し: 年月日表示（2秒）
  - S1+S2長押し（2秒）: 時刻設定
- **年月日表示**:
  - S2長押し（2秒）: 年月日設定
- **設定モード**:
  - S1: 項目切替（時→分→秒→保存、または年→月→日→保存）
  - S2: 値増加（短押しで+1、長押しで10Hzで増加）

## 注意事項
- RTC電圧低下（VLビット=1）時、時刻は00:00:00、年月日は2025.01.01にリセットされ、LED7が常時点灯。
- 日付の妥当性（例: 2月30日）はチェックしないため、適切な値を設定してください。

## 課題
- 12/24時間表記のわかりにくさ。→スイッチ1を押すと12:00:00 24:00:00を1秒間表示などに変更

